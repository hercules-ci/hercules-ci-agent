resolver: nightly-2020-11-23

# paths to local packages
packages:
  - hercules-ci-api
  - hercules-ci-api-core
  - hercules-ci-api-agent
  - hercules-ci-agent
  - tests/agent-test
extra-deps:
  # # REMINDER: sync with scripts/generate-nix
  # - cachix-0.5.1
  # - cachix-api-0.5.0
  - git: https://github.com/hercules-ci/cachix.git
    # branch: protolude-0.3
    commit: 9cfe586a9ed173f87d741063bced024335e394ba
    subdirs:
      - cachix
      - cachix-api
  # TODO: sync with scripts/generate-nix
  - netrc-0.2.0.0@sha256:0e1e6e3f3fbd83c26c0e5edec27098bed99219afaaeeebf9ff19aedff1e4b332,2145
  - nix-derivation-1.0.2@sha256:dc1f13f89d37d4dcc7a46dbac7f6b4e8cd2877f4af99e35b9cb8255d08179bd4,3123
  - nix-narinfo-0.1.0.1@sha256:53d9ee364e14815b058c14e3056157f0245ba97972806ae3916a50f035955ea9,2111
  - protolude-0.3.0
  - servant-auth-0.4.0.0@sha256:01d02dfb7df4747fc96442517146d7d4ab0e575e597a124e238e8763036ea4ff,2125
  - servant-auth-client-0.4.1.0
  - servant-auth-server-0.4.6.0@sha256:b411b44f4252e91e5da2455d71a7113c8b5b8ff2d943d19b2ddedcfcf0392351,5111
  - servant-auth-swagger-0.2.10.1@sha256:6d5f1a4594c922fa8baccb0344de91108d57d1228ec5911723fce4340c27d129,2821
  - servant-websockets-2.0.0@sha256:6e9e3600bced90fd52ed3d1bf632205cb21479075b20d6637153cc4567000234,2253

install-ghc: false  # we're using nixpkgs' ghc
system-ghc: true    # nixpkgs ghc is perceived as 'system ghc'

nix:
  packages: []      # use shell instead
  shell-file: ./nix/stack-shell.nix
  pure: false
